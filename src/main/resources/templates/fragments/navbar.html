<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<title>Navbar</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

</head>

<body class="bg-gray-100">

	<!-- Navbar Fragment -->
	<div th:fragment="navbar">

		<!-- UNIVERSAL NAVBAR TEMPLATE FOR ALL ROLES -->
		<div sec:authorize="hasAnyRole('ROLE_WORKER', 'ROLE_REQUESTER', 'ROLE_ADMIN')">
			<nav class="w-full bg-gray-900 text-white shadow-md fixed top-0 left-0 z-50">
				<div class="max-w-7xl mx-auto px-4">
					<div class="flex justify-between items-center h-16">

						<!-- Logo + Brand Name (Visible for all roles) -->
						<div class="flex-shrink-0">
							<div class="flex items-center space-x-3">
								<div class="h-12 w-12 rounded-full overflow-hidden shadow-md">
									<img th:src="@{/images/FinalLogo2.png}" alt="Logo"
										class="h-full w-full object-cover" />
								</div>
								<div class="flex flex-col">
									<span class="text-2xl font-semibold tracking-wide">Kamiyapp</span>
									<span class="text-sm text-gray-400 -mt-1">Work Done, Worries None</span>
								</div>
							</div>
						</div>

						<!-- Mobile Menu Toggle Button -->
						<div class="md:hidden">
							<button id="mobile-menu-toggle" class="focus:outline-none text-3xl">&#9776;</button>
						</div>

						<!-- Menu Items (Desktop) -->
						<div class="hidden md:flex space-x-6 items-center">
							<!-- Worker Role Items -->
							<div sec:authorize="hasRole('ROLE_WORKER')" class="flex space-x-6">
								<a href="/worker/dashboard" class="hover:text-green-400">Home</a>
								<a href="/skills/add" class="hover:text-green-400">Add Skill</a>
								<a href="/worker/bookings" class="hover:text-green-400">Requests</a>
								<a href="/feedback/leave-review" class="hover:text-green-400">Review</a>
								<a href="/profile" class="hover:text-green-400">Profile</a>
							</div>

							<!-- Requester Role Items -->
							<div sec:authorize="hasRole('ROLE_REQUESTER')" class="flex space-x-6">
								<a href="/requester/dashboard" class="hover:text-green-400">Home</a>
								<a href="/skills/search" class="hover:text-green-400">Search
									Skills</a> <a href="/skills/all" class="hover:text-green-400">All
									Skills</a> <a href="/requester/bookings" class="hover:text-green-400">Bookings</a>
								<a href="/feedback/leave-review" class="hover:text-green-400">Review</a>
								<a href="/profile" class="hover:text-green-400">Profile</a>
							</div>

							<!-- Admin Role Items -->
							<div sec:authorize="hasRole('ROLE_ADMIN')" class="flex space-x-6">
								<a href="/dashboard/admin" class="hover:text-green-400">Home</a>
								<a href="/admin/users" class="hover:text-green-400">Manage
									Users</a>
							</div>

							<!-- Profile Icon Dropdown -->
							<div class="relative">
								<button id="profile-menu-toggle" class="flex items-center focus:outline-none">
									<div class="w-10 h-10 rounded-full overflow-hidden border-2 border-white">

										<img src="/images/default.jpg" th:src="@{/profile/image}" alt="Profile"
											class="w-10 h-10 object-cover rounded-full border-green-400"
											onerror="this.onerror=null; this.src='/images/default.jpg';">
									</div>


								</button>

								<!-- Profile Dropdown Menu with Same Background as Navbar -->
								<div id="profile-menu"
									class="absolute right-0 mt-2 w-48 bg-gray-900 text-white rounded-lg shadow-lg py-2 z-50 hidden">

									<a href="/updatePassword"
										class="block px-4 py-2 text-green-300 hover:text-green-400 hover:bg-gray-800 transition duration-150 ease-in-out">Change
										Password</a> <a href="/auth/logout"
										class="block px-4 py-2 text-red-400 hover:text-red-500 hover:bg-gray-800 transition duration-150 ease-in-out">Logout</a>
								</div>

							</div>

						</div>
					</div>
				</div>

				<!-- Mobile Menu (Hidden by default) -->
				<div id="mobile-menu" class="hidden md:hidden flex-col bg-gray-800 px-6 py-4 space-y-3 text-left">
					<div sec:authorize="hasRole('ROLE_WORKER')" class="flex flex-col space-y-3">
						<a href="/worker/dashboard" class="hover:text-green-400">Home</a>
						<a href="/skills/add" class="hover:text-green-400">Add Skill</a> <a href="/worker/bookings"
							class="hover:text-green-400">Requests</a>
						<a href="/feedback/leave-review" class="hover:text-green-400">Review</a>
						<a href="/profile" class="hover:text-green-400">Profile</a> <a href="/auth/logout"
							class="hover:text-red-400">Logout</a>
					</div>

					<div sec:authorize="hasRole('ROLE_REQUESTER')" class="flex flex-col space-y-3">
						<a href="/requester/dashboard" class="hover:text-green-400">Home</a>
						<a href="/skills/search" class="hover:text-green-400">Search
							Skills</a> <a href="/skills/all" class="hover:text-green-400">All
							Skills</a> <a href="/requester/bookings" class="hover:text-green-400">Bookings</a>
						<a href="/feedback/leave-review" class="hover:text-green-400">Review</a>
						<a href="/profile" class="hover:text-green-400">Profile</a> <a href="/auth/logout"
							class="hover:text-red-400">Logout</a>
					</div>

					<div sec:authorize="hasRole('ROLE_ADMIN')" class="flex flex-col space-y-3">
						<a href="/dashboard/admin" class="hover:text-green-400">Home</a> <a href="/admin/users"
							class="hover:text-green-400">Manage Users</a>
						<a href="/auth/logout" class="hover:text-red-400">Logout</a>
					</div>
				</div>
			</nav>
		</div>

	</div>



</body>

</html>